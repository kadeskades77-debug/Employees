2026-01-12 20:17:05.780 +03:00 [INF] User profile is available. Using 'C:\Users\Hashem\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-12 20:17:06.069 +03:00 [INF] Now listening on: https://localhost:7212
2026-01-12 20:17:06.070 +03:00 [INF] Now listening on: http://localhost:5298
2026-01-12 20:17:06.145 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-12 20:17:06.147 +03:00 [INF] Hosting environment: Development
2026-01-12 20:17:06.148 +03:00 [INF] Content root path: C:\Users\Hashem\source\repos\Employee\EMPLOYEE
2026-01-12 20:18:57.118 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7212/swagger/index.html - null null
2026-01-12 20:19:17.766 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7212/api/auth/login - application/json 67
2026-01-12 20:19:17.860 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7212/swagger/index.html - 200 null text/html;charset=utf-8 20668.0054ms
2026-01-12 20:19:18.671 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7212/_framework/aspnetcore-browser-refresh.js - null null
2026-01-12 20:19:18.772 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7212/_framework/aspnetcore-browser-refresh.js - 200 16500 application/javascript; charset=utf-8 101.5524ms
2026-01-12 20:19:19.946 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7212/_vs/browserLink - null null
2026-01-12 20:19:20.680 +03:00 [INF] Executing endpoint 'EMPLOYEE.Controllers.AuthController.Login (EMPLOYEE)'
2026-01-12 20:19:23.918 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7212/_vs/browserLink - 200 null text/javascript; charset=UTF-8 3972.0708ms
2026-01-12 20:19:26.080 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(EMPLOYEE.Application.Dtos.LoginDto) on controller EMPLOYEE.Controllers.AuthController (EMPLOYEE).
2026-01-12 20:19:26.322 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7212/swagger/v1/swagger.json - null null
2026-01-12 20:19:26.547 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7212/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 224.5231ms
2026-01-12 20:19:49.809 +03:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2026-01-12 20:20:44.096 +03:00 [INF] Executed DbCommand (2,089ms) [Parameters=[@__normalizedEmail_0='KADESKADES77@GMAIL.COM' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2026-01-12 20:20:49.449 +03:00 [INF] Executed DbCommand (104ms) [Parameters=[@__userId_0='d3318a8e-0d29-4a3c-81ee-8d28f5757ab3' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2026-01-12 20:20:49.547 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='d3318a8e-0d29-4a3c-81ee-8d28f5757ab3' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2026-01-12 20:20:50.156 +03:00 [INF] Executed DbCommand (271ms) [Parameters=[@__roles_0='["Admin"]' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT [p].[Name]
FROM [RolePermissions] AS [r]
INNER JOIN [AspNetRoles] AS [a] ON [r].[RoleId] = [a].[Id]
INNER JOIN [Permissions] AS [p] ON [r].[PermissionId] = [p].[Id]
WHERE [a].[Name] IN (
    SELECT [r0].[value]
    FROM OPENJSON(@__roles_0) WITH ([value] nvarchar(256) '$') AS [r0]
)
2026-01-12 20:20:51.656 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType20`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-12 20:20:51.873 +03:00 [INF] Executed action EMPLOYEE.Controllers.AuthController.Login (EMPLOYEE) in 85786.4895ms
2026-01-12 20:20:51.876 +03:00 [INF] Executed endpoint 'EMPLOYEE.Controllers.AuthController.Login (EMPLOYEE)'
2026-01-12 20:20:51.890 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7212/api/auth/login - 200 null application/json; charset=utf-8 94124.9181ms
2026-01-12 20:24:44.973 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7212/api/Department/change-manager - application/json 89
2026-01-12 20:24:46.402 +03:00 [INF] Executing endpoint 'EMPLOYEE.Controllers.DepartmentController.ChangeManager (EMPLOYEE)'
2026-01-12 20:24:46.411 +03:00 [INF] Route matched with {action = "ChangeManager", controller = "Department"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ChangeManager(EMPLOYEE.Application.Features.Departments.DepartmentsDtos.ChangeDepartmentManagerDto) on controller EMPLOYEE.Controllers.DepartmentController (EMPLOYEE).
2026-01-12 20:24:47.016 +03:00 [INF] Executed DbCommand (315ms) [Parameters=[@__p_0='d3318a8e-0d29-4a3c-81ee-8d28f5757ab3' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2026-01-12 20:24:47.209 +03:00 [INF] Executed DbCommand (184ms) [Parameters=[@__userId_0='d3318a8e-0d29-4a3c-81ee-8d28f5757ab3' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2026-01-12 20:24:47.418 +03:00 [INF] Executed DbCommand (203ms) [Parameters=[@__roles_0='["Admin"]' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT [p].[Name]
FROM [RolePermissions] AS [r]
INNER JOIN [AspNetRoles] AS [a] ON [r].[RoleId] = [a].[Id]
INNER JOIN [Permissions] AS [p] ON [r].[PermissionId] = [p].[Id]
WHERE [a].[Name] IN (
    SELECT [r0].[value]
    FROM OPENJSON(@__roles_0) WITH ([value] nvarchar(256) '$') AS [r0]
)
2026-01-12 20:24:47.491 +03:00 [INF] Executed DbCommand (62ms) [Parameters=[@__dto_DepartmentId_0='11'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[ManagerUserId], [d].[Name]
FROM [Departments] AS [d]
WHERE [d].[Id] = @__dto_DepartmentId_0
2026-01-12 20:24:47.612 +03:00 [INF] Executed DbCommand (62ms) [Parameters=[@__managerUserId_0='d46d21cd-72df-4eec-84be-c7a2f7492d0d' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Departments] AS [d]
        WHERE [d].[ManagerUserId] = @__managerUserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-01-12 20:24:47.691 +03:00 [INF] Executed action EMPLOYEE.Controllers.DepartmentController.ChangeManager (EMPLOYEE) in 1276.7428ms
2026-01-12 20:24:47.707 +03:00 [INF] Executed endpoint 'EMPLOYEE.Controllers.DepartmentController.ChangeManager (EMPLOYEE)'
2026-01-12 20:24:47.710 +03:00 [ERR] Unhandled Exception
System.NullReferenceException: Object reference not set to an instance of an object.
   at EMPLOYEE.Application.Features.Departments.DepartmentService.DepartmentService.ChangeManagerAsync(ChangeDepartmentManagerDto dto, String callerId) in C:\Users\Hashem\source\repos\Employee\EMPLOYEE\Application\Features\Departments\DepartmentService\DepartmentService.cs:line 107
   at EMPLOYEE.Controllers.DepartmentController.ChangeManager(ChangeDepartmentManagerDto dto) in C:\Users\Hashem\source\repos\Employee\EMPLOYEE\Controllers\DepartmentController.cs:line 52
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Users\Hashem\source\repos\Employee\EMPLOYEE\Middlware\ExceptionHandlingMiddleware.cs:line 22
2026-01-12 20:24:47.973 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7212/api/Department/change-manager - 500 null application/json; charset=utf-8 3000.439ms
2026-01-12 20:27:42.378 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7212/swagger/index.html - null null
2026-01-12 20:27:42.807 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7212/swagger/index.html - 200 null text/html;charset=utf-8 428.374ms
2026-01-12 20:27:45.752 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7212/_framework/aspnetcore-browser-refresh.js - null null
2026-01-12 20:27:45.752 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7212/_vs/browserLink - null null
2026-01-12 20:27:45.766 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7212/_framework/aspnetcore-browser-refresh.js - 200 16500 application/javascript; charset=utf-8 13.933ms
2026-01-12 20:27:45.935 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7212/_vs/browserLink - 200 null text/javascript; charset=UTF-8 182.2439ms
2026-01-12 20:27:46.018 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7212/swagger/v1/swagger.json - null null
2026-01-12 20:27:46.051 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7212/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 33.8479ms
2026-01-12 20:37:31.966 +03:00 [INF] User profile is available. Using 'C:\Users\Hashem\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-12 20:37:32.203 +03:00 [INF] Now listening on: https://localhost:7212
2026-01-12 20:37:32.205 +03:00 [INF] Now listening on: http://localhost:5298
2026-01-12 20:37:32.329 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-12 20:37:32.333 +03:00 [INF] Hosting environment: Development
2026-01-12 20:37:32.335 +03:00 [INF] Content root path: C:\Users\Hashem\source\repos\Employee\EMPLOYEE
2026-01-12 20:37:32.916 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7212/swagger/index.html - null null
2026-01-12 20:37:33.304 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7212/swagger/index.html - 200 null text/html;charset=utf-8 387.6954ms
2026-01-12 20:37:33.343 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7212/_vs/browserLink - null null
2026-01-12 20:37:33.343 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7212/_framework/aspnetcore-browser-refresh.js - null null
2026-01-12 20:37:33.382 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7212/_framework/aspnetcore-browser-refresh.js - 200 16500 application/javascript; charset=utf-8 38.3168ms
2026-01-12 20:37:33.446 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7212/_vs/browserLink - 200 null text/javascript; charset=UTF-8 102.2963ms
2026-01-12 20:37:33.582 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7212/swagger/v1/swagger.json - null null
2026-01-12 20:37:33.708 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7212/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 126.0395ms
2026-01-12 20:37:44.756 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7212/api/Department/change-manager - application/json 89
2026-01-12 20:37:44.889 +03:00 [INF] Executing endpoint 'EMPLOYEE.Controllers.DepartmentController.ChangeManager (EMPLOYEE)'
2026-01-12 20:37:44.926 +03:00 [INF] Route matched with {action = "ChangeManager", controller = "Department"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ChangeManager(EMPLOYEE.Application.Features.Departments.DepartmentsDtos.ChangeDepartmentManagerDto) on controller EMPLOYEE.Controllers.DepartmentController (EMPLOYEE).
2026-01-12 20:37:46.233 +03:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2026-01-12 20:37:56.853 +03:00 [INF] Executed DbCommand (161ms) [Parameters=[@__p_0='d3318a8e-0d29-4a3c-81ee-8d28f5757ab3' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2026-01-12 20:37:57.108 +03:00 [INF] Executed DbCommand (42ms) [Parameters=[@__userId_0='d3318a8e-0d29-4a3c-81ee-8d28f5757ab3' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2026-01-12 20:37:57.315 +03:00 [INF] Executed DbCommand (110ms) [Parameters=[@__roles_0='["Admin"]' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT [p].[Name]
FROM [RolePermissions] AS [r]
INNER JOIN [AspNetRoles] AS [a] ON [r].[RoleId] = [a].[Id]
INNER JOIN [Permissions] AS [p] ON [r].[PermissionId] = [p].[Id]
WHERE [a].[Name] IN (
    SELECT [r0].[value]
    FROM OPENJSON(@__roles_0) WITH ([value] nvarchar(256) '$') AS [r0]
)
2026-01-12 20:37:57.366 +03:00 [INF] Executed DbCommand (37ms) [Parameters=[@__dto_DepartmentId_0='11'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[ManagerUserId], [d].[Name]
FROM [Departments] AS [d]
WHERE [d].[Id] = @__dto_DepartmentId_0
2026-01-12 20:37:57.421 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__managerUserId_0='d46d21cd-72df-4eec-84be-c7a2f7492d0d' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Departments] AS [d]
        WHERE [d].[ManagerUserId] = @__managerUserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-01-12 20:37:57.465 +03:00 [INF] Executed action EMPLOYEE.Controllers.DepartmentController.ChangeManager (EMPLOYEE) in 12529.394ms
2026-01-12 20:37:57.472 +03:00 [INF] Executed endpoint 'EMPLOYEE.Controllers.DepartmentController.ChangeManager (EMPLOYEE)'
2026-01-12 20:37:57.478 +03:00 [ERR] Unhandled Exception
System.NullReferenceException: Object reference not set to an instance of an object.
   at EMPLOYEE.Application.Features.Departments.DepartmentService.DepartmentService.ChangeManagerAsync(ChangeDepartmentManagerDto dto, String callerId) in C:\Users\Hashem\source\repos\Employee\EMPLOYEE\Application\Features\Departments\DepartmentService\DepartmentService.cs:line 107
   at EMPLOYEE.Controllers.DepartmentController.ChangeManager(ChangeDepartmentManagerDto dto) in C:\Users\Hashem\source\repos\Employee\EMPLOYEE\Controllers\DepartmentController.cs:line 52
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Users\Hashem\source\repos\Employee\EMPLOYEE\Middlware\ExceptionHandlingMiddleware.cs:line 22
2026-01-12 20:37:57.532 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7212/api/Department/change-manager - 500 null application/json; charset=utf-8 12775.6715ms
2026-01-12 20:38:02.170 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7212/api/Department/change-manager - application/json 89
2026-01-12 20:38:02.184 +03:00 [INF] Executing endpoint 'EMPLOYEE.Controllers.DepartmentController.ChangeManager (EMPLOYEE)'
2026-01-12 20:38:02.186 +03:00 [INF] Route matched with {action = "ChangeManager", controller = "Department"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ChangeManager(EMPLOYEE.Application.Features.Departments.DepartmentsDtos.ChangeDepartmentManagerDto) on controller EMPLOYEE.Controllers.DepartmentController (EMPLOYEE).
2026-01-12 20:38:02.282 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='d3318a8e-0d29-4a3c-81ee-8d28f5757ab3' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2026-01-12 20:38:02.288 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='d3318a8e-0d29-4a3c-81ee-8d28f5757ab3' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2026-01-12 20:38:02.297 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__roles_0='["Admin"]' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT [p].[Name]
FROM [RolePermissions] AS [r]
INNER JOIN [AspNetRoles] AS [a] ON [r].[RoleId] = [a].[Id]
INNER JOIN [Permissions] AS [p] ON [r].[PermissionId] = [p].[Id]
WHERE [a].[Name] IN (
    SELECT [r0].[value]
    FROM OPENJSON(@__roles_0) WITH ([value] nvarchar(256) '$') AS [r0]
)
2026-01-12 20:38:02.303 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_DepartmentId_0='11'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[ManagerUserId], [d].[Name]
FROM [Departments] AS [d]
WHERE [d].[Id] = @__dto_DepartmentId_0
2026-01-12 20:38:02.308 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__managerUserId_0='d46d21cd-72df-4eec-84be-c7a2f7492d0d' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Departments] AS [d]
        WHERE [d].[ManagerUserId] = @__managerUserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-01-12 20:38:02.313 +03:00 [INF] Executed action EMPLOYEE.Controllers.DepartmentController.ChangeManager (EMPLOYEE) in 124.0943ms
2026-01-12 20:38:02.316 +03:00 [INF] Executed endpoint 'EMPLOYEE.Controllers.DepartmentController.ChangeManager (EMPLOYEE)'
2026-01-12 20:38:02.318 +03:00 [ERR] Unhandled Exception
System.NullReferenceException: Object reference not set to an instance of an object.
   at EMPLOYEE.Application.Features.Departments.DepartmentService.DepartmentService.ChangeManagerAsync(ChangeDepartmentManagerDto dto, String callerId) in C:\Users\Hashem\source\repos\Employee\EMPLOYEE\Application\Features\Departments\DepartmentService\DepartmentService.cs:line 107
   at EMPLOYEE.Controllers.DepartmentController.ChangeManager(ChangeDepartmentManagerDto dto) in C:\Users\Hashem\source\repos\Employee\EMPLOYEE\Controllers\DepartmentController.cs:line 52
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Users\Hashem\source\repos\Employee\EMPLOYEE\Middlware\ExceptionHandlingMiddleware.cs:line 22
2026-01-12 20:38:02.327 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7212/api/Department/change-manager - 500 null application/json; charset=utf-8 156.3003ms
2026-01-12 20:38:14.780 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7212/swagger/index.html - null null
2026-01-12 20:38:14.796 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7212/swagger/index.html - 200 null text/html;charset=utf-8 15.4069ms
2026-01-12 20:38:14.855 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7212/_vs/browserLink - null null
2026-01-12 20:38:14.856 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7212/_framework/aspnetcore-browser-refresh.js - null null
2026-01-12 20:38:14.864 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7212/_framework/aspnetcore-browser-refresh.js - 200 16500 application/javascript; charset=utf-8 8.2523ms
2026-01-12 20:38:14.880 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7212/_vs/browserLink - 200 null text/javascript; charset=UTF-8 24.6845ms
2026-01-12 20:38:15.179 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7212/swagger/v1/swagger.json - null null
2026-01-12 20:38:15.212 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7212/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 32.713ms
2026-01-12 20:38:21.588 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7212/api/Department/change-manager - application/json 89
2026-01-12 20:38:21.599 +03:00 [INF] Executing endpoint 'EMPLOYEE.Controllers.DepartmentController.ChangeManager (EMPLOYEE)'
2026-01-12 20:38:21.601 +03:00 [INF] Route matched with {action = "ChangeManager", controller = "Department"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ChangeManager(EMPLOYEE.Application.Features.Departments.DepartmentsDtos.ChangeDepartmentManagerDto) on controller EMPLOYEE.Controllers.DepartmentController (EMPLOYEE).
2026-01-12 20:38:21.866 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='d3318a8e-0d29-4a3c-81ee-8d28f5757ab3' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2026-01-12 20:38:21.872 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='d3318a8e-0d29-4a3c-81ee-8d28f5757ab3' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2026-01-12 20:38:21.878 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__roles_0='["Admin"]' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT [p].[Name]
FROM [RolePermissions] AS [r]
INNER JOIN [AspNetRoles] AS [a] ON [r].[RoleId] = [a].[Id]
INNER JOIN [Permissions] AS [p] ON [r].[PermissionId] = [p].[Id]
WHERE [a].[Name] IN (
    SELECT [r0].[value]
    FROM OPENJSON(@__roles_0) WITH ([value] nvarchar(256) '$') AS [r0]
)
2026-01-12 20:38:21.887 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_DepartmentId_0='11'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[ManagerUserId], [d].[Name]
FROM [Departments] AS [d]
WHERE [d].[Id] = @__dto_DepartmentId_0
2026-01-12 20:38:21.892 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__managerUserId_0='d46d21cd-72df-4eec-84be-c7a2f7492d0d' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Departments] AS [d]
        WHERE [d].[ManagerUserId] = @__managerUserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-01-12 20:38:21.898 +03:00 [INF] Executed action EMPLOYEE.Controllers.DepartmentController.ChangeManager (EMPLOYEE) in 293.9657ms
2026-01-12 20:38:21.901 +03:00 [INF] Executed endpoint 'EMPLOYEE.Controllers.DepartmentController.ChangeManager (EMPLOYEE)'
2026-01-12 20:38:21.902 +03:00 [ERR] Unhandled Exception
System.NullReferenceException: Object reference not set to an instance of an object.
   at EMPLOYEE.Application.Features.Departments.DepartmentService.DepartmentService.ChangeManagerAsync(ChangeDepartmentManagerDto dto, String callerId) in C:\Users\Hashem\source\repos\Employee\EMPLOYEE\Application\Features\Departments\DepartmentService\DepartmentService.cs:line 107
   at EMPLOYEE.Controllers.DepartmentController.ChangeManager(ChangeDepartmentManagerDto dto) in C:\Users\Hashem\source\repos\Employee\EMPLOYEE\Controllers\DepartmentController.cs:line 52
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Users\Hashem\source\repos\Employee\EMPLOYEE\Middlware\ExceptionHandlingMiddleware.cs:line 22
2026-01-12 20:38:21.911 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7212/api/Department/change-manager - 500 null application/json; charset=utf-8 323.1712ms
2026-01-12 20:39:11.394 +03:00 [INF] Application is shutting down...
2026-01-12 20:40:12.111 +03:00 [INF] User profile is available. Using 'C:\Users\Hashem\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-12 20:40:12.395 +03:00 [INF] Now listening on: https://localhost:7212
2026-01-12 20:40:12.399 +03:00 [INF] Now listening on: http://localhost:5298
2026-01-12 20:40:12.545 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2026-01-12 20:40:12.580 +03:00 [INF] Hosting environment: Development
2026-01-12 20:40:12.583 +03:00 [INF] Content root path: C:\Users\Hashem\source\repos\Employee\EMPLOYEE
2026-01-12 20:40:13.005 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7212/swagger/index.html - null null
2026-01-12 20:40:13.319 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7212/swagger/index.html - 200 null text/html;charset=utf-8 316.0933ms
2026-01-12 20:40:13.386 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7212/_framework/aspnetcore-browser-refresh.js - null null
2026-01-12 20:40:13.390 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7212/_vs/browserLink - null null
2026-01-12 20:40:13.400 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7212/_framework/aspnetcore-browser-refresh.js - 200 16500 application/javascript; charset=utf-8 13.4417ms
2026-01-12 20:40:13.447 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7212/_vs/browserLink - 200 null text/javascript; charset=UTF-8 57.0061ms
2026-01-12 20:40:13.629 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7212/swagger/v1/swagger.json - null null
2026-01-12 20:40:13.687 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7212/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 57.982ms
2026-01-12 20:40:57.654 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7212/api/Department/change-manager - application/json 89
2026-01-12 20:40:57.914 +03:00 [INF] Executing endpoint 'EMPLOYEE.Controllers.DepartmentController.ChangeManager (EMPLOYEE)'
2026-01-12 20:40:58.067 +03:00 [INF] Route matched with {action = "ChangeManager", controller = "Department"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ChangeManager(EMPLOYEE.Application.Features.Departments.DepartmentsDtos.ChangeDepartmentManagerDto) on controller EMPLOYEE.Controllers.DepartmentController (EMPLOYEE).
2026-01-12 20:40:59.151 +03:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2026-01-12 20:41:01.923 +03:00 [INF] Executed DbCommand (141ms) [Parameters=[@__p_0='d3318a8e-0d29-4a3c-81ee-8d28f5757ab3' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2026-01-12 20:41:02.180 +03:00 [INF] Executed DbCommand (54ms) [Parameters=[@__userId_0='d3318a8e-0d29-4a3c-81ee-8d28f5757ab3' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2026-01-12 20:41:02.431 +03:00 [INF] Executed DbCommand (153ms) [Parameters=[@__roles_0='["Admin"]' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT [p].[Name]
FROM [RolePermissions] AS [r]
INNER JOIN [AspNetRoles] AS [a] ON [r].[RoleId] = [a].[Id]
INNER JOIN [Permissions] AS [p] ON [r].[PermissionId] = [p].[Id]
WHERE [a].[Name] IN (
    SELECT [r0].[value]
    FROM OPENJSON(@__roles_0) WITH ([value] nvarchar(256) '$') AS [r0]
)
2026-01-12 20:41:02.548 +03:00 [INF] Executed DbCommand (103ms) [Parameters=[@__dto_DepartmentId_0='11'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[ManagerUserId], [d].[Name]
FROM [Departments] AS [d]
WHERE [d].[Id] = @__dto_DepartmentId_0
2026-01-12 20:41:02.614 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[@__managerUserId_0='d46d21cd-72df-4eec-84be-c7a2f7492d0d' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Departments] AS [d]
        WHERE [d].[ManagerUserId] = @__managerUserId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-01-12 20:41:02.628 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='d46d21cd-72df-4eec-84be-c7a2f7492d0d' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2026-01-12 20:41:02.695 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedRoleName_0='MANAGER' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2026-01-12 20:41:02.738 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__p_0='d46d21cd-72df-4eec-84be-c7a2f7492d0d' (Size = 450), @__p_1='dc1d735f-3673-4374-a381-335d0c699c78' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2026-01-12 20:41:02.750 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2026-01-12 20:41:02.763 +03:00 [INF] Executed action EMPLOYEE.Controllers.DepartmentController.ChangeManager (EMPLOYEE) in 4684.3361ms
2026-01-12 20:41:02.767 +03:00 [INF] Executed endpoint 'EMPLOYEE.Controllers.DepartmentController.ChangeManager (EMPLOYEE)'
2026-01-12 20:41:02.788 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7212/api/Department/change-manager - 200 null text/plain; charset=utf-8 5133.6826ms
2026-01-12 20:42:01.978 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7212/api/Department/all - null null
2026-01-12 20:42:01.993 +03:00 [INF] Executing endpoint 'EMPLOYEE.Controllers.DepartmentController.GetAll (EMPLOYEE)'
2026-01-12 20:42:02.001 +03:00 [INF] Route matched with {action = "GetAll", controller = "Department"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller EMPLOYEE.Controllers.DepartmentController (EMPLOYEE).
2026-01-12 20:42:02.549 +03:00 [INF] Executed DbCommand (375ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Name], [a].[Id] AS [ManagerUserId], [a].[FirstName] + N' ' + [a].[LastName] AS [ManagerName]
FROM [Departments] AS [d]
INNER JOIN [AspNetUsers] AS [a] ON [d].[ManagerUserId] = [a].[Id]
2026-01-12 20:42:02.555 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[EMPLOYEE.Application.Features.Departments.DepartmentsDtos.DepartmentDto, EMPLOYEE, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-12 20:42:02.597 +03:00 [INF] Executed action EMPLOYEE.Controllers.DepartmentController.GetAll (EMPLOYEE) in 592.9286ms
2026-01-12 20:42:02.600 +03:00 [INF] Executed endpoint 'EMPLOYEE.Controllers.DepartmentController.GetAll (EMPLOYEE)'
2026-01-12 20:42:02.602 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7212/api/Department/all - 200 null application/json; charset=utf-8 623.5923ms
